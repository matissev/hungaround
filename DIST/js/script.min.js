var shown=!1,step=0,blueMarkersPosition=[{lat:"43.248363","long":"2.427920"},{lat:"43.412190","long":"0.214175"},{lat:"42.681586","long":"-0.280210"},{lat:"44.031490","long":"4.081363"},{lat:"43.300819","long":"-1.615689"},{lat:"42.948002","long":"-0.429166"}],redMarkersPosition=[{lat:"43.982085","long":"3.907478"},{lat:"43.430126","long":"0.699470"},{lat:"43.174278","long":"-1.173699"}],greenMarkersPosition=[{lat:"43.909806","long":"6.225070"},{lat:"44.193841","long":"6.192950"},{lat:"44.039483","long":"6.696849"},{lat:"43.959635","long":"5.573183"},{lat:"43.600241","long":"6.113721"},{lat:"43.830815","long":"7.071214"},{lat:"44.057757","long":"4.765858"},{lat:"43.933368","long":"4.305138"},{lat:"48.393764","long":"2.605991"},{lat:"48.39365","long":"2.638435"},{lat:"48.382478","long":"2.651482"},{lat:"43.373566","long":"2.440705"},{lat:"42.892971","long":"0.935572"},{lat:"42.857416","long":"-0.555427"},{lat:"43.012346","long":"-1.168948"},{lat:"43.088416","long":"-1.842834"},{lat:"42.690938","long":"-1.145438"},{lat:"42.362094","long":"-0.207881"},{lat:"41.995003","long":"1.170606"}],blueMarkers=[],greenMarkers=[],redMarkers=[],marker=0,oldDistance=0,bestMarker=0,oldMapLocation=0;jQuery(document).ready(function(e){function a(){var e={center:new google.maps.LatLng(44.770137,6.965332),zoom:8,mapTypeId:google.maps.MapTypeId.TERRAIN};map=new google.maps.Map(document.getElementById("largeMap"),e),map.setTilt(45),map.setHeading(90);for(var a=0;a<greenMarkersPosition.length;a++)greenMarkers[a]=new google.maps.LatLng(greenMarkersPosition[a].lat,greenMarkersPosition[a].long),marker=new google.maps.Marker({position:greenMarkers[a],map:map,title:"Hello World!",icon:"img/icones/nonlu.svg"});for(var a=0;a<blueMarkersPosition.length;a++)blueMarkers[a]=new google.maps.LatLng(blueMarkersPosition[a].lat,blueMarkersPosition[a].long),marker=new google.maps.Marker({position:blueMarkers[a],map:map,title:"Hello World!",icon:"img/icones/suivi.svg"});for(var a=0;a<redMarkersPosition.length;a++)redMarkers[a]=new google.maps.LatLng(redMarkersPosition[a].lat,redMarkersPosition[a].long),marker=new google.maps.Marker({position:redMarkers[a],map:map,title:"Hello World!",icon:"img/icones/recommande.svg"})}e(".my-sticky-element").waypoint("sticky"),e(".infinite-container").waypoint("infinite"),e(".mosaic").packery({itemSelector:".item"}),e(".nav-filtre").each(function(){e(this).click(function(){var a=e(this).data("filtered");e(this).find("input:checked").length?e("."+a).css("display","block"):e("."+a).css("display","none"),e(".mosaic").packery("destroy"),e(".mosaic").packery({itemSelector:".item"})})}),e("#gallery").length&&e("#gallery").lightGallery();var t=!1,o=!1,n='<div class="item p1x1 recommande"><a href="#" class="showArticle"><img src="img/photos/mosaic/1x1-1.jpg" alt="" class="item-img"/></a><div class="item-links"><a href="#" class="item-links-articleName showArticle">D&#39;est en ouest...</a><a href="lieu.html" class="item-links-lieu">Col de la Ly√©</a><a href="profil.html" class="item-links-auteur">Francois Juste</a></div></div>',l=new InfoBubble({content:n,minWidth:170,minHeight:212,padding:0,borderRadius:0,borderWidth:0,shadowStyle:2,arrowSize:0,hideCloseButton:!0,disableAutoPan:!0});google.maps.event.addDomListener(window,"load",a),o=setInterval(function(){var e=blueMarkersPosition.concat(redMarkersPosition).concat(greenMarkersPosition);if(centerMap=map.getCenter(),oldMapLocation!=centerMap){for(i=1;i<e.length;i++)markerCompared=new google.maps.LatLng(e[i].lat,e[i].long),distance=google.maps.geometry.spherical.computeDistanceBetween(centerMap,markerCompared),(0==oldDistance||oldDistance>=distance)&&(oldDistance=distance,bestMarker=markerCompared,console.log(oldDistance));marker=new google.maps.Marker({position:bestMarker,map:map,title:"Hello World!",icon:"img/icones/nonlu.svg"}),l.open(map,marker)}oldDistance=0,oldMapLocation=centerMap},200),e(".nav-profil-photo").click(function(){e("#menuNotif").toggleClass("open")}),e(".posted-articles").click(function(){e(".shared-mosaic").toggleClass("hideit"),e(".posted-mosaic").toggleClass("showit")}),e(".shared-articles").click(function(){e(".shared-mosaic").toggleClass("showit"),e(".posted-mosaic").toggleClass("hideit")}),e(".showArticle").click(function(){e(".article").toggleClass("toggleArticle"),e("main").toggleClass("away"),e("#largeMap").toggleClass("littlemap"),e(".closeArticle").toggleClass("toggleCloser"),shown=!shown,1==shown?(LatLng1=new google.maps.LatLng(45.4101435,5.8236147),LatLng2=new google.maps.LatLng(45.3597474,5.8129717),LatLng3=new google.maps.LatLng(45.2850354,5.7752062),map.setCenter(LatLng1),map.setZoom(13),t=setTimeout(function(){google.maps.event.trigger(map,"resize"),map.panTo(LatLng1);var e=(new google.maps.Marker({position:LatLng1,map:map,title:"Hello World!",icon:"img/icones/map-marker.svg"}),new google.maps.Marker({position:LatLng2,map:map,title:"Hello World!",icon:"img/icones/map-marker.svg"}),new google.maps.Marker({position:LatLng3,map:map,title:"Hello World!",icon:"img/icones/map-marker.svg"}),{path:"M 0,-1 0,1",strokeOpacity:1,scale:4}),a=[LatLng1,LatLng2,LatLng3],t=new google.maps.Polyline({path:a,icons:[{icon:e,offset:"0",repeat:"20px"}],geodesic:!0,strokeColor:"#e64c27",strokeOpacity:0,strokeWeight:3});t.setMap(map)},1e3)):(a(),t=setInterval(function(){google.maps.event.trigger(map,"resize"),step++,2==step&&clearInterval(t)},500))}),e(".nav-register, .fermeture").click(function(){e(".popupContainer").toggleClass("show")}),e(".linkMap").click(function(){e("#content").toggleClass("kickOutContent"),e(this).toggleClass("letLinkMap"),"Carte"==e("#textLinkMap").html()?e("#textLinkMap").html("Gazette"):e("#textLinkMap").html("Carte")}),e("#marker1").waypoint(function(){map.panTo(LatLng1)},{context:".article"}),e("#marker2-1").waypoint(function(){map.panTo(LatLng2)},{context:".article"}),e("#marker2-2").waypoint(function(){map.panTo(LatLng2)},{context:".article"}),e("#marker3").waypoint(function(){map.panTo(LatLng3)},{context:".article"}),e(".infinite-container").waypoint("infinite"),e(".my-sticky-element").waypoint("sticky")});