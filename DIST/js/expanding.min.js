!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){window.console&&console.warn&&console.warn(t)}var n=function(e,i){n._registry.push(this),this.$textarea=e,this.$textCopy=t("<span />"),this.$clone=t("<pre class='expanding-clone'><br /></pre>").prepend(this.$textCopy),this._resetStyles(),this._setCloneStyles(),this._setTextareaStyles(),e.wrap(t("<div class='expanding-wrapper' style='position:relative' />")).after(this.$clone),this.attach(),this.update(),i.update&&e.bind("update.expanding",i.update)};n._registry=[],n.getExpandingInstance=function(e){var i=t.map(n._registry,function(t){return t.$textarea[0]}),a=t.inArray(e,i);return a>-1?n._registry[a]:null};var i=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==n.exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),a="oninput"in document.createElement("input")&&9!==i;n.prototype={attach:function(){var t="input.expanding change.expanding",e=this;a||(t+=" keyup.expanding"),this.$textarea.bind(t,function(){e.update()})},update:function(){this.$textCopy.text(this.$textarea.val().replace(/\r\n/g,"\n")),this.$textarea.triggerHandler("update.expanding")},destroy:function(){this.$clone.remove(),this.$textarea.unwrap().attr("style",this._oldTextareaStyles||""),delete this._oldTextareaStyles;var e=t.inArray(this,n._registry);e>-1&&n._registry.splice(e,1),this.$textarea.unbind("input.expanding change.expanding keyup.expanding update.expanding")},_resetStyles:function(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.add(this.$clone).css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})},_setCloneStyles:function(){var t={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.outerHeight()};"off"===this.$textarea.attr("wrap")?t.overflowX="scroll":t.whiteSpace="pre-wrap",this.$clone.css(t),this._copyTextareaStylesToClone()},_copyTextareaStylesToClone:function(){var e=this,n=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];t.each(n,function(t,n){var i=e.$textarea.css(n);e.$clone.css(n)!==i&&(e.$clone.css(n,i),"maxHeight"===n&&"none"!==i&&e.$clone.css("overflow","hidden"))})},_setTextareaStyles:function(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none",overflow:"auto"})}},t.expanding=t.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{update:function(){}}},t.expanding||{}),t.fn.expanding=function(i){if("destroy"===i)return this.each(function(){var t=n.getExpandingInstance(this);t&&t.destroy()}),this;if("active"===i)return!!this.filter(function(){return!!n.getExpandingInstance(this)}).length;var a=t.extend({},t.expanding.opts,i);return this.filter("textarea").each(function(){var i=this.offsetWidth>0||this.offsetHeight>0,r=n.getExpandingInstance(this);i&&!r?new n(t(this),a):(i||e("ExpandingTextareas: attempt to initialize an invisible textarea. Call expanding() again once it has been inserted into the page and/or is visible."),r&&e("ExpandingTextareas: attempt to initialize a textarea that has already been initialized. Subsequent calls are ignored."))}),this},t(function(){t.expanding.autoInitialize&&t(t.expanding.initialSelector).expanding()})});