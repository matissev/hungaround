!function(e){"use strict";e.fn.lightGallery=function(i){var a,t,l,n,s,d,o,r,c,h,u,m,p,v={mode:"slide",useCSS:!0,easing:"linear",speed:1e3,closable:!0,loop:!1,auto:!1,pause:4e3,escKey:!0,rel:!1,lang:{allPhotos:"All photos"},exThumbImage:!1,index:!1,thumbnail:!0,caption:!1,captionLink:!1,desc:!1,counter:!1,controls:!0,hideControlOnEnd:!1,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,vimeoColor:"CCCCCC",videoAutoplay:!0,videoMaxWidth:855,dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){}},f=e(this),g=!1,y='<div id="lightGallery-outer"><div id="lightGallery-Gallery"><div id="lightGallery-slider"></div><a id="lightGallery-close" class="close"></a></div></div>',C=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,b=!1,S=!1,w=!1,x=e.extend(!0,{},v,i),G={init:function(){f.each(function(){var i=e(this);1==x.dynamic?(a=x.dynamicEl,t=0,c=t,q.init(t)):(a=e(this).children(),a.click(function(l){if(1==x.rel&&i.data("rel")){var n=i.data("rel");a=e('[data-rel="'+n+'"]').children()}else a=i.children();l.preventDefault(),l.stopPropagation(),t=a.index(this),c=t,q.init(t)}))})}},q={init:function(){this.start(),this.build()},start:function(){this.structure(),this.getWidth(),this.closeSlide()},build:function(){this.loadContent(t),this.addCaption(),this.addDesc(),this.counter(),this.slideTo(),this.buildThumbnail(),this.keyPress(),x.index?this.slide(x.index):this.slide(t),this.touch(),this.enableTouch(),setTimeout(function(){l.addClass("opacity")},50)},structure:function(){e("body").append(y).addClass("lightGallery"),n=e("#lightGallery-outer"),l=e("#lightGallery-Gallery"),s=l.find("#lightGallery-slider");var i="";if(1==x.dynamic)for(var t=0;t<x.dynamicEl.length;t++)i+='<div class="lightGallery-slide"></div>';else a.each(function(){i+='<div class="lightGallery-slide"></div>'});s.append(i),d=l.find(".lightGallery-slide")},closeSlide:function(){var i=this;x.closable&&e(".lightGallery-slide").on("click",function(a){console.log(a.target),e(a.target).is(".lightGallery-slide")&&i.destroy()}),e("#lightGallery-close").bind("click touchend",function(){i.destroy()})},getWidth:function(){var i=function(){m=e(window).width()};e(window).bind("resize.lightGallery",i())},doCss:function(){var e=function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,a=0;a<e.length;a++)if(e[a]in i.style)return!0};return x.useCSS&&e()?!0:!1},enableTouch:function(){var i=this;if(C){var a={},t={};e("body").on("touchstart.lightGallery",function(e){t=e.originalEvent.targetTouches[0],a.pageX=e.originalEvent.targetTouches[0].pageX,a.pageY=e.originalEvent.targetTouches[0].pageY}),e("body").on("touchmove.lightGallery",function(e){var i=e.originalEvent;t=i.targetTouches[0],e.preventDefault()}),e("body").on("touchend.lightGallery",function(){var e=t.pageX-a.pageX,l=x.swipeThreshold;e>=l?(i.prevSlide(),clearInterval(p)):-l>=e&&(i.nextSlide(),clearInterval(p))})}},touch:function(){var i,a,t=this;e(".lightGallery").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault(),i=e.pageX}),e(".lightGallery").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault(),a=e.pageX,a-i>20?t.prevSlide():i-a>20&&t.nextSlide()})},isVideo:function(e){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),a=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);return i||a?!0:void 0},loadVideo:function(e,i,a){var t=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),l=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),n="";return t?(i=x.videoAutoplay===!0&&i===!0?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",n='<iframe id="video'+a+'" width="560" height="315" src="//www.youtube.com/embed/'+t[1]+i+'" frameborder="0" allowfullscreen></iframe>'):l&&(i=x.videoAutoplay===!0&&i===!0?"autoplay=1&amp;":"",n='<iframe id="video'+a+'" width="560" height="315"  src="http://player.vimeo.com/video/'+l[1]+"?"+i+"byline=0&amp;portrait=0&amp;color="+x.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="video_cont" style="max-width:'+x.videoMaxWidth+'px !important;"><div class="video">'+n+"</div></div>"},loadContent:function(i){var t,l,n,s,o=this,r=a.length-i;o.autoStart(),s=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[0].mobileSrc:a.eq(i).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[0].src:a.eq(i).attr("data-src"),o.isVideo(s)?(d.eq(i).prepend(o.loadVideo(s,!0,i)),n=e("iframe"),x.auto&&x.videoAutoplay===!0&&clearInterval(p)):(d.eq(i).prepend('<img src="'+s+'" />'),n=e("img")),a.length>1&&d.eq(i).find(n).on("load error",function(){for(t=0;i-1>=t;t++){var e;e=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[i-t-1].mobileSrc:a.eq(i-t-1).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[i-t-1].src:a.eq(i-t-1).attr("data-src"),o.isVideo(e)?d.eq(i-t-1).prepend(o.loadVideo(e,!1,i-t-1)):d.eq(i-t-1).prepend('<img src="'+e+'" />')}for(l=1;r>l;l++){var e;e=x.mobileSrc===!0&&m<=x.mobileSrcMaxWidth?1==x.dynamic?x.dynamicEl[i+l].mobileSrc:a.eq(i+l).attr("data-responsive-src"):1==x.dynamic?x.dynamicEl[i+l].src:a.eq(i+l).attr("data-src"),o.isVideo(e)?d.eq(i+l).prepend(o.loadVideo(e,!1,i+l)):d.eq(i+l).prepend('<img src="'+e+'" />')}})},addCaption:function(){if(x.caption===!0){var e,i=!1;for(e=0;e<a.length;e++)if(i=1==x.dynamic?x.dynamicEl[e].caption:a.eq(e).attr("data-title"),("undefined"==typeof i||null==i)&&(i="image "+e),x.captionLink===!0){var t=a.eq(e).attr("data-link");t="undefined"!=typeof t&&""!==t?t:"#",d.eq(e).append('<div class="info group"><a href="'+t+'" class="title">'+i+"</a></div>")}else d.eq(e).append('<div class="info group"><span class="title">'+i+"</span></div>")}},addDesc:function(){if(x.desc===!0){var e,i=!1;for(e=0;e<a.length;e++)i=1==x.dynamic?x.dynamicEl[e].desc:a.eq(e).attr("data-desc"),("undefined"==typeof i||null==i)&&(i="image "+e),x.caption===!1?d.eq(e).append('<div class="info group"><span class="desc">'+i+"</span></div>"):d.eq(e).find(".info").append('<span class="desc">'+i+"</span>")}},counter:function(){if(x.counter===!0){var i=e("#lightGallery-slider > div").length;l.append("<div id='lightGallery_counter'><span id='lightGallery_counter_current'></span> / <span id='lightGallery_counter_all'>"+i+"</span></div>")}},buildThumbnail:function(){if(x.thumbnail===!0&&a.length>1){var i=this;l.append('<div class="thumb_cont"><div class="thumb_info"><span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span></div><div class="thumb_inner"></div></div>'),h=l.find(".thumb_cont"),o.after('<a class="cLthumb"></a>'),l.find(".cLthumb").bind("click touchend",function(){h.addClass("open"),i.doCss()&&"slide"===x.mode&&(d.eq(t).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(t).nextAll().removeClass("prevSlide").addClass("nextSlide"))}),l.find(".close").bind("click touchend",function(){h.removeClass("open")});var n,s=l.find(".thumb_info"),r=l.find(".thumb_inner"),c="";if(1==x.dynamic)for(var m=0;m<x.dynamicEl.length;m++)n=x.dynamicEl[m].thumb,c+='<div class="thumb"><img src="'+n+'" /></div>';else a.each(function(){n=x.exThumbImage===!1||"undefined"==typeof e(this).attr(x.exThumbImage)||null==e(this).attr(x.exThumbImage)?e(this).find("img").attr("src"):e(this).attr(x.exThumbImage),c+='<div class="thumb"><img src="'+n+'" /></div>'});r.append(c),u=r.find(".thumb"),u.bind("click touchend",function(){b=!0;var a=e(this).index();u.removeClass("active"),e(this).addClass("active"),i.slide(a),clearInterval(p)}),s.prepend('<span class="ib count">'+x.lang.allPhotos+" ("+u.length+")</span>")}},slideTo:function(){var e=this;x.controls===!0&&a.length>1&&(l.append('<div id="lightGallery-action"><a id="lightGallery-prev"></a><a id="lightGallery-next"></a></div>'),o=l.find("#lightGallery-prev"),r=l.find("#lightGallery-next"),o.bind("click",function(){e.prevSlide(),clearInterval(p)}),r.bind("click",function(){e.nextSlide(),clearInterval(p)}))},autoStart:function(){var e=this;x.auto===!0&&(p=setInterval(function(){t=t+1<a.length?t:-1,t++,e.slide(t)},x.pause))},keyPress:function(){var i=this;e(window).bind("keyup.lightGallery",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode&&(i.prevSlide(),clearInterval(p)),38===e.keyCode&&x.thumbnail===!0?h.hasClass("open")||(i.doCss()&&"slide"===x.mode&&(d.eq(t).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(t).nextAll().removeClass("prevSlide").addClass("nextSlide")),h.addClass("open")):39===e.keyCode&&(i.nextSlide(),clearInterval(p)),40===e.keyCode&&x.thumbnail===!0?h.hasClass("open")&&h.removeClass("open"):x.escKey===!0&&27===e.keyCode&&(x.thumbnail===!0&&h.hasClass("open")?h.removeClass("open"):i.destroy())})},nextSlide:function(){var e=this;t=d.index(d.eq(c)),t+1<a.length?(t++,e.slide(t)):x.loop?(t=0,e.slide(t)):"fade"===x.mode&&x.thumbnail===!0&&a.length>1&&h.addClass("open"),x.onSlideNext.call(this)},prevSlide:function(){var e=this;t=d.index(d.eq(c)),t>0?(t--,e.slide(t)):x.loop?(t=a.length-1,e.slide(t)):"fade"===x.mode&&x.thumbnail===!0&&a.length>1&&h.addClass("open"),x.onSlidePrev.call(this)},slide:function(i){g&&(s.hasClass("on")||s.addClass("on"),this.doCss()&&""!==x.speed&&(s.hasClass("speed")||s.addClass("speed"),w===!1&&(s.css("transition-duration",x.speed+"ms"),w=!0)),this.doCss()&&""!==x.easing&&(s.hasClass("timing")||s.addClass("timing"),S===!1&&(s.css("transition-timing-function",x.easing),S=!0)),x.onSlideBefore.call(this)),"slide"===x.mode?(this.doCss()&&!s.hasClass("slide")&&s.addClass("slide"),this.doCss()||g?!this.doCss()&&g&&s.animate({left:100*-i+"%"},x.speed,x.easing):s.css({left:100*-i+"%"})):"fade"===x.mode&&(this.doCss()&&!s.hasClass("fadeM")?s.addClass("fadeM"):this.doCss()||s.hasClass("animate")||s.addClass("animate"),this.doCss()||g?!this.doCss()&&g&&(d.eq(c).fadeOut(x.speed,x.easing),d.eq(i).fadeIn(x.speed,x.easing)):(d.fadeOut(100),d.eq(i).fadeIn(100))),i+1>=a.length&&x.auto&&x.loop===!1&&clearInterval(p),d.eq(c).removeClass("current"),d.eq(i).addClass("current"),this.doCss()&&"slide"===x.mode&&(b===!1?(e(".prevSlide").removeClass("prevSlide"),e(".nextSlide").removeClass("nextSlide"),d.eq(i-1).addClass("prevSlide"),d.eq(i+1).addClass("nextSlide")):(d.eq(i).prevAll().removeClass("nextSlide").addClass("prevSlide"),d.eq(i).nextAll().removeClass("prevSlide").addClass("nextSlide"))),x.thumbnail===!0&&a.length>1&&(u.removeClass("active"),u.eq(i).addClass("active")),x.controls&&x.hideControlOnEnd&&x.loop===!1&&(0===i?o.addClass("disabled"):i===a.length-1?r.addClass("disabled"):o.add(r).removeClass("disabled")),c=i,g===!1?x.onOpen.call(this):x.onSlideAfter.call(this),g=!0,b=!1,x.counter&&e("#lightGallery_counter_current").text(i+1)},destroy:function(){x.onBeforeClose.call(this),g=!1,S=!1,w=!1,b=!1,clearInterval(p),e(".lightGallery").off("mousedown mouseup"),e("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),e(window).off("resize.lightGallery keyup.lightGallery"),l.addClass("fadeM"),setTimeout(function(){n.remove(),e("body").removeClass("lightGallery")},500),x.onCloseAfter.call(this)}};return G.init(),this}}(jQuery);